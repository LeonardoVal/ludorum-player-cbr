{"version":3,"sources":["../src/__prologue__.js","../src/CaseBase.js","../src/CBRPlayer.js","../src/dbs/MemoryCaseBase.js","../src/__epilogue__.js","../src/dbs/SQLiteCaseBase.js","../src/utils.js"],"names":["__init__","base","Sermat","ludorum","declare","unimplemented","objects","Randomness","raise","raiseIf","Iterable","iterable","Future","exports","__package__","__name__","__dependencies__","__SERMAT__","include","dbs","utils","CaseBase","constructor","params","this","game","encoding","distance","random","DEFAULT","features1","features2","zip","mapApply","f1","f2","isNaN","Math","abs","sum","addCase","addMatch","match","options","cdb","run","then","result","i","players","forEach","p","history","entry","moves","_case","state","addMatches","matches","sequence","populate","n","RandomPlayer","matchups","product","apply","repeat","length","toArray","range","ceil","Match","cases","nn","k","cb","gameCase","cs","map","features","sorted","c1","c2","slice","actionEvaluations","role","roleIndex","indexOf","r","move","toObject","knn","forEachApply","m","actions","Object","values","gameEvaluation","static __SERMAT__","identifier","serializer","obj","hasOwnProperty","CBRPlayer","Player","call","caseBase","decision","positiveActions","filter","t","negativeActions","console","log","choice","movesFor","weightedChoice","normalizeWeights","assess","player","cbrPlayer","evaluation","matchPlayers","playerIndex","playerRole","MemoryCaseBase","__cases__","clone","push","serialize_CaseBase","SQLiteCaseBase","__setupDatabase__","Database","require","__db__","dbpath","name","toLowerCase","featureColumns","_","actionColumns","resultColumns","rt","columns","concat","sql","colName","join","prepare","register","deterministic","varargs","__distanceFunction__","df","middle","arguments","__key__","caseKey","JSON","stringify","pi","sets","encodings","TicTacToe","board","split","chr"],"mappings":"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","file":"ludorum-player-cbr-tag.min.js"}