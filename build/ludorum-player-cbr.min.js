//! ludorum-player-cbr 0.0.1

(function(a){"use strict";"function"==typeof define&&define.amd?define(["creatartis-base","sermat","ludorum"],a):"object"==typeof exports&&module.exports?module.exports=a(require("creatartis-base"),require("sermat"),require("ludorum")):this["ludorum-player-cbr"]=a(this.base,this.Sermat,this.ludorum)}).call(this,function a(b,c,d){"use strict";var e=(b.declare,b.objects.unimplemented,b.raise,b.raiseIf,b.Randomness,b.Iterable,b.iterable,b.Future,{__package__:"ludorum-player-cbr",__name__:"ludorum_player_cbr",__init__:a,__dependencies__:[b,c,d],__SERMAT__:{include:[b,d]}});b.declare(d.Player,{constructor:function(a){d.Player.call(this,a),this.caseDB=a&&a.caseDB,this.caseN=a&&a.caseN||20},evaluatedMoves:function(a,c){var d=this.caseDB,e=b.iterable(this.movesFor(a,c)).map(function(a){return[a+"",[a,0]]}).toObject();return b.iterable(d.knn(this.caseN,a,c)).forEach(function(a){var b=e[a.actions[c]];b&&(b[1]+=(a.result[c][0]-a.result[c][2])/a.count)}),Object.values(e)},decision:function(a,c){var d,e=this.evaluatedMoves(a,c),f=b.iterable(e).greater(function(a){return a[1]}).map(function(a){return d=a[1],a[0]});return b.raiseIf(!f||!f.length,"No moves where selected at ",a," for player ",c,"!"),1===f.length?f[0]:b.Randomness.DEFAULT.choice(f)},assess:function(a,c,e){var f=this,g=b.iterable(a.players).map(function(a){return[a,[0,0,0]]}).toObject(),h=b.Iterable.repeat(c,a.players.length).toArray();return e=+e||100,b.Future.sequence(b.Iterable.range(e),function(b){var c=h.slice(),e=b%a.players.length,i=a.players[e];c[e]=f;var j=new d.Match(a,c);return j.run().then(function(){var a=j.result()[i];g[i][a>0?0:a<0?2:1]++})}).then(function(){return g})}});return e});
//# sourceMappingURL=ludorum-player-cbr.min.js.map