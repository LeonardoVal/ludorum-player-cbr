{"version":3,"sources":["../src/__prologue__.js","../src/CBRDatabase.js","../src/CBRPlayer.js","../src/__epilogue__.js"],"names":["__init__","base","Sermat","ludorum","exports","declare","raise","raiseIf","Randomness","Iterable","iterable","Future","__package__","__name__","__dependencies__","__SERMAT__","include","constructor","params","this","game","__encoding__","encoding","maxDistance","Infinity","minCount","random","DEFAULT","__setupDatabase__","__db__","Database","name","toLowerCase","moves","featureColumns","features","map","_","i","actionColumns","players","resultColumns","range","length","product","mapApply","p","rt","toArray","sql","concat","colName","join","prepare","run","register","deterministic","varargs","distance","n1","n2","r","middle","arguments","isNaN","Math","abs","addCase","actions","result","sqlWhere","f","a","get","JSON","stringify","repeat","column","indexOf","addMatch","match","randomAdvance","cdb","history","randomPly","randomInt","state","isContingent","__advanceContingents__","move","activePlayers","forEach","activePlayer","choice","__advance__","push","events","on","g","ms","data","then","count","addMatches","matches","sequence","console","log","Date","populate","options","n","RandomPlayer","matchups","apply","ceil","Match","maxPly","knn","role","roleIndex","resultSet","all","record","toObject","d","static __SERMAT__","identifier","serializer","obj","cases","featureFunction","Player","call","caseDB","caseN","evaluatedMoves","movesFor","_case","m","Object","values","decision","bestEval","bestMoves","greater","t","assess","player","cbrPlayer","evaluation","matchPlayers","slice","playerIndex","playerRole"],"mappings":"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","file":"ludorum-player-cbr.min.js"}