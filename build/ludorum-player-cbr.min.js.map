{"version":3,"sources":["../src/__prologue__.js","../src/CaseBase.js","../src/CBRPlayer.js","../src/dbs/MemoryCaseBase.js","../src/__epilogue__.js","../src/dbs/SQLiteCaseBase.js"],"names":["__init__","base","Sermat","ludorum","declare","unimplemented","objects","Randomness","raise","raiseIf","Iterable","Future","iterable","exports","__package__","__name__","__dependencies__","__SERMAT__","include","dbs","CaseBase","constructor","params","this","game","encoding","random","DEFAULT","distance","features1","features2","zip","mapApply","f1","f2","n1","isNaN","n2","Math","abs","sum","addCase","addMatch","match","options","cdb","run","then","result","i","players","forEach","p","history","entry","moves","_case","state","addMatches","matches","sequence","populate","n","RandomPlayer","matchups","product","apply","repeat","length","toArray","range","ceil","Match","cases","nn","k","cb","cs","map","gameCase","features","sorted","c1","c2","slice","static __SERMAT__","identifier","serializer","obj","hasOwnProperty","CBRPlayer","Player","call","caseDB","caseN","evaluatedMoves","role","r","movesFor","move","toObject","knn","m","actions","count","Object","values","decision","bestEval","bestMoves","greater","t","choice","assess","player","cbrPlayer","evaluation","matchPlayers","playerIndex","playerRole","MemoryCaseBase","__cases__","clone","push","serialize_CaseBase","SQLiteCaseBase","__setupDatabase__","Database","require","__db__","dbpath","name","toLowerCase","featureColumns","_","actionColumns","resultColumns","rt","columns","concat","sql","colName","join","prepare","register","deterministic","varargs","__distanceFunction__","df","middle","arguments","__key__","caseKey","JSON","stringify","pi","indexOf","roleIndex","data","resultSet","all","record","d","encodingTicTacToe","board","split","chr"],"mappings":"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","file":"ludorum-player-cbr.min.js"}