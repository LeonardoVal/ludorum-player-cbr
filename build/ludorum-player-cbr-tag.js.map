{"version":3,"sources":["../src/__prologue__.js","../src/CBRDatabase.js","../src/CBRPlayer.js","../src/__epilogue__.js"],"names":[],"mappings":"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","file":"ludorum-player-cbr-tag.js","sourcesContent":["/** Package wrapper and layout.\n*/\nfunction __init__(base, Sermat, ludorum) { \"use strict\";\n// Import synonyms. ////////////////////////////////////////////////////////////////////////////////\n\tvar declare = base.declare,\n\t\traise = base.raise,\n\t\traiseIf = base.raiseIf,\n\t\tRandomness = base.Randomness,\n\t\tIterable = base.Iterable,\n\t\titerable = base.iterable,\n\t\tFuture = base.Future;\n\n// Library layout. /////////////////////////////////////////////////////////////////////////////////\n\tvar exports = {\n\t\t__package__: 'ludorum-player-cbr',\n\t\t__name__: 'ludorum_player_cbr',\n\t\t__init__: __init__,\n\t\t__dependencies__: [base, Sermat, ludorum],\n\t\t__SERMAT__: { include: [base, ludorum] }\n\t};\n","/** # CBRDatabase \r\n\r\n*/\r\nvar CBRDatabase = exports.CBRDatabase = declare({\r\n\tconstructor: function CBRDatabase(params) {\r\n\t\tvar cdb = this;\r\n\t\tthis.cases = params && params.cases || [];\r\n\t\tthis.index = params && params.index || iterable(this.cases).map(function (_case, i) {\r\n\t\t\treturn [cdb.___caseKey__(_case), i];\r\n\t\t}).toObject();\r\n\t\tthis.featureFunction = params && params.featureFunction;\r\n\t\tthis.maxDistance = params && params.maxDistance || Infinity;\r\n\t\tthis.totalCount = iterable(this.cases).map(function (_case) {\r\n\t\t\t\treturn _case.count |0;\r\n\t\t\t}).sum();\r\n\t},\r\n\r\n\t___caseKey__: function ___caseKey__(_case) {\r\n\t\treturn _case.join(' ');\r\n\t},\r\n\r\n\tfeatures: function features(game, moves) {\r\n\t\treturn this.featureFunction(game, moves);\r\n\t},\r\n\r\n\t// Case building //////////////////////////////////////////////////////////////////////////////\r\n\r\n\taddCase: function addCase(_case, results) {\r\n\t\tvar caseKey = this.___caseKey__(_case),\r\n\t\t\tcaseIndex = this.index[caseKey];\r\n\t\tif (typeof caseIndex === 'undefined') {\r\n\t\t\t_case = _case.slice(); // Shallow copy.\r\n\t\t\tthis.index[caseKey] = this.cases.length;\r\n\t\t\tthis.cases.push(_case);\r\n\t\t\t_case.result = iterable(results).mapApply(function (p, r) {\r\n\t\t\t\treturn [p, [0, 0, 0]];\r\n\t\t\t}).toObject();\r\n\t\t} else {\r\n\t\t\t_case = this.cases[caseIndex];\r\n\t\t}\r\n\t\t_case.count = (_case.count || 0) + 1;\r\n\t\tfor (var p in results) {\r\n\t\t\tif (results[p] > 0) {\r\n\t\t\t\t_case.result[p][0]++;\r\n\t\t\t} else if (results[p] < 0) {\r\n\t\t\t\t_case.result[p][2]++;\r\n\t\t\t} else { \r\n\t\t\t\t_case.result[p][1]++;\r\n\t\t\t}\t\r\n\t\t}\r\n\t\tthis.totalCount++;\r\n\t\treturn _case.count;\r\n\t},\r\n\r\n\taddMatch: function addMatch(match) {\r\n\t\tvar cdb = this,\r\n\t\t\thistory = [];\r\n\t\tmatch.events.on('move', function (g, ms) {\r\n\t\t\tvar fs = cdb.features(g, ms);\r\n\t\t\thistory.push(fs);\r\n\t\t});\r\n\t\treturn match.run().then(function () {\r\n\t\t\tvar r = match.result(),\r\n\t\t\t\tcount = 0;\r\n\t\t\thistory.forEach(function (fs) {\r\n\t\t\t\tcount += cdb.addCase(fs, r);\r\n\t\t\t});\r\n\t\t\treturn count;\r\n\t\t});\r\n\t},\r\n\r\n\taddMatches: function addMatches(matches) {\r\n\t\tvar cdb = this;\r\n\t\treturn base.Future.sequence(matches, function (match) {\r\n\t\t\treturn cdb.addMatch(match);\r\n\t\t});\r\n\t},\r\n\r\n\taddRandomMatches: function addRandomMatches(n, game) {\r\n\t\treturn this.addMatches(base.Iterable.range(n).map(function () {\r\n\t\t\treturn ludorum.players.RandomPlayer.playTo(game);\r\n\t\t}));\r\n\t},\r\n\r\n\taddMatchesBetween: function addMatchesBetween(n, game, players) {\r\n\t\tvar matchups = Iterable.product.apply(Iterable, \r\n\t\t\t\tIterable.repeat(players, game.players.length).toArray()\r\n\t\t\t).toArray();\r\n\t\tn = Math.ceil(n / matchups.length);\r\n\t\treturn this.addMatches(Iterable.range(n).product(matchups).mapApply(function (i, players) {\r\n\t\t\treturn new ludorum.Match(game, players);\r\n\t\t}));\r\n\t},\r\n\r\n\t// Database use ///////////////////////////////////////////////////////////////////////////////\r\n\r\n\tdistance: function distance(gameFeatures, caseFeatures) {\r\n\t\treturn base.iterable(gameFeatures).zip(caseFeatures).mapApply(function (gf, cf) {\r\n\t\t\treturn Math.abs(gf - cf);\r\n\t\t}).sum();\r\n\t},\r\n\r\n\tknn: function knn(n, game) {\r\n\t\tvar cdb = this,\r\n\t\t\tfs = this.features(game),\r\n\t\t\tcs = this.cases.map(function (_case) {\r\n\t\t\t\treturn [_case, cdb.distance(fs, _case)]; \r\n\t\t\t});\r\n\t\tcs.sort(function (c1, c2) {\r\n\t\t\treturn c1[1] - c2[1];\r\n\t\t});\r\n\t\treturn cs.slice(0, +n);\r\n\t},\r\n\r\n\t// Utilities //////////////////////////////////////////////////////////////////////////////////\r\n\r\n\t'static __SERMAT__': {\r\n\t\tidentifier: 'CBRDatabase',\r\n\t\tserializer: function serialize_CBRDatabase(obj) {\r\n\t\t\treturn [{\r\n\t\t\t\tcases: obj.cases,\r\n\t\t\t\tfeatureFunction: obj.featureFunction,\r\n\t\t\t\tmaxDistance: obj.maxDistance\r\n\t\t\t}];\r\n\t\t}\r\n\t},\r\n}); // declare CBRDatabase","/** # CBR Player \r\n\r\n*/\r\nvar CBRPlayer = exports.CBRPlayer = declare(ludorum.Player, {\r\n\tconstructor: function CBRPlayer(params) {\r\n\t\tludorum.Player.call(this, params);\r\n\t\tthis.caseDB = params && params.caseDB;\r\n\t\tthis.caseN = params && params.caseN || 100;\r\n\t},\r\n\r\n\tevaluatedMoves: function evaluatedMoves(game, role) {\r\n\t\tvar caseDB = this.caseDB,\r\n\t\t\tgameFeatures = this.caseDB.features(game),\r\n\t\t\tr = base.iterable(this.movesFor(game, role)).map(function (move) {\r\n\t\t\t\treturn [move +'', [move, 0]];\r\n\t\t\t}).toObject();\r\n\t\tbase.iterable(caseDB.knn(this.caseN, game, role)).mapApply(function (_case, d) {\r\n\t\t\tvar caseMove = _case[_case.length - 1],\r\n\t\t\t\tem = r[caseMove +''];\r\n\t\t\tif (em) {\r\n\t\t\t\tem[1] += (_case.result[role][0] - _case.result[role][2]) / _case.count / \r\n\t\t\t\t\tcaseDB.totalCount; // / (1 + d);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn Object.values(r);\r\n\t},\r\n\r\n\tdecision: function decision(game, role) {\r\n\t\tvar evaluatedMoves = this.evaluatedMoves(game, role);\r\n\t\tvar bestMoves = iterable(evaluatedMoves).greater(function (t) {\r\n\t\t\treturn t[1];\r\n\t\t}).map(function (t) {\r\n\t\t\treturn t[0];\r\n\t\t});\r\n\t\traiseIf(!bestMoves || !bestMoves.length, \r\n\t\t\t\"No moves where selected at \", game, \" for player \", role, \"!\");\r\n\t\treturn bestMoves.length === 1 ? bestMoves[0] : Randomness.DEFAULT.choice(bestMoves);\r\n\t},\r\n\r\n\tassess: function assess(game, player, n) { //FIXME game.players.length !== 2\r\n\t\tvar cbrPlayer = this,\r\n\t\t\tevaluation = iterable(game.players).map(function (p) {\r\n\t\t\t\treturn [p, [0,0,0]];\r\n\t\t\t}).toObject();\r\n\t\tn = +n || 100;\r\n\t\treturn Future.sequence(Iterable.range(n / 2), function (i) {\r\n\t\t\tvar match = new ludorum.Match(game, [player, cbrPlayer]);\r\n\t\t\treturn match.run().then(function () {\r\n\t\t\t\tvar r = match.result()[game.players[0]];\r\n\t\t\t\tevaluation[game.players[0]][r > 0 ? 0 : r < 0 ? 2 : 1]++;\r\n\t\t\t}).then(function () {\r\n\t\t\t\tvar match = new ludorum.Match(game, [player, cbrPlayer]);\r\n\t\t\t\treturn match.run().then(function () {\r\n\t\t\t\t\tvar r =  match.result()[game.players[1]];\r\n\t\t\t\t\tevaluation[game.players[1]][r > 0 ? 0 : r < 0 ? 2 : 1]++;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}).then(function () {\r\n\t\t\treturn evaluation;\r\n\t\t});\r\n\t}\r\n}); // declare CBRPlayer","// See __prologue__.js\n\treturn exports;\n}\n"]}